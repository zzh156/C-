# 地址族与数据序列
IP 是分配给计算机的，而端口号是为了区分程序中创建的套接字而分配给套接字的序号
# 网络地址
IPV4           4字节地址族
IPV6           16字节地址族
差别：字节数不同，IPV4的IP耗尽，因而有了IPV6
IPV4标准的4字节IP地址分为网络地址和主机地址，且分为ABCDE类型，一般不会使用已被预约了的E类地址。
A:1字节网络ID，3字节主机ID
B:2字节网络ID，2字节主机ID
C:3字节网络ID，1字节主机ID
D:4字节多播IP地址

传输数据的过程：
外网  交换机/路由器   内网
向公司传送数据 应该先向网络传送数据，仅浏览4字节ip地址的网络地址，先把数据传到网络，再由构成网络的路由器浏览传送数据的主机地址并把数据传送给目标计算器
路由器或交换机实际也是一种计算机，可被我们的计算机模拟

# 网络地址分类与主机地址边界
A类地址的首字节范围 0-127
B类地址的首字节范围 128-191
C类地址的首字节范围 192-223

还有如下表达方式：
A类地址的首位以0开始
B类地址的前两位以10开始
C类地址的前3位以110开始

# 用于区分套接字的端口号
计算机中有NIC(网络接口卡)，通过NIC向计算机内部传输数据会用到IP，操作系统负责把传递到内部的数据适当分配给套接字，这时就要利用端口号

端口号由16位构成，范围0-65535，但0-1023是知名端口，一般分配给特定程序。
TCP和UDP套接字可以重复端口号
# 地址信息的表示

目标地址以结构体表示，传递给bind函数

```c
struct sockaddr_in
{
    sa_family_t sin_family //地址族
    uint16_t sin_port     //16位TCP/UDP 端口号
    struct in_addr sin_addr; //32位ip地址
    char  sin_zero[8];  //不使用
}

//in_addr 结构体
struct in_addr
{
  in_addr_t          s_addr;    //32位ipv4地址 

}
```
# POSIX中定义的数据类型
数据类型名称           数据类型说明         头文件
int8_t              signed 8-bit int
uint8_t             unsigned 8-bit int
int 16_t            signed 16-bit int
uint 16_t           unsigned 16-bit int
int 32_t            signed 32_bit int                    sys/types.h
uint32_t      unsigned32_bit int                                         



sa_family_t       地址族                                 sys/socket.h
socklen_t          长度

in_addr_t         IP地址，声明为uint32_t                netinet/in.h
in_port_t         端口号，声明为uint16_t                 

# 结构体sockaddr_in 的成员分析
## 成员sin_family
ipv4  4字节地址族   ipv6  16字节地址族

                            地址族
AF_INET                      IPV4网络协议的地址族
AF_INET6                     IPV6...
AF_LOCAL                     本地通信中采用的unix协议地址族

## sin_port
以网络字节序保存16位端口号
## sin_addr
以网络字节序保存32位ip地址
##sin_zero 
为了使结构体sockaddr_in的大小与sockaddr结构体保持一致，必须填充为0
 
#网络字节序与地址变换
## 字节序与网络字节序
cpu中保存的方式分为大端序和小端序
大端序：将高位字节放到低位地址  
小端序：将低位字节放到低位地址  颠倒
主流的 intel amd cpu以小端序存储

网络字节序统一为大端序
## 字节序转换
转换字节序的函数

```c
htons//h 代表host 主机字节序  to 转换   n 代表network 网络字节序 s代表short型数据
//以s为后缀的函数 s代表两个short 用于端口号转换，以l作为后缀，l代表4个字节，用于ip地址转换
//字节序的转换是自动的，除了向sockaddr_in结构体变量填充数据时，其他情况无需考虑字节序问题 
```
#网络地址的初始化与分配
## 将字符串转换为网络字节序的整数型
ip 地址以 点分十进制表示法表示，一个字节最大255
## 使用函数将字符串转换为整数型网络字节序

```c
#include<arpa/inet.h>

in_addr_t inet_addr (const char*string);
//成功时返回32位大端序整数值，失败时返回INADDR_NONE
in_addr_t 在内部声明为32位整数型

//inet_aton功能与inet_addr相同，只不过利用了结构体
#include<arpa/inet.h>
int inet_aton(const char * string,struct in_addr*addr)
//成功时返回1(true),失败时返回0(false)
//in_addr:将保存结果的in_addr结构体变量的地址值
```
# inet_ntoa
将网络字节序整数型ip地址转换成字符串
若要长期保存，应该把字符串复制到其他内存空间



