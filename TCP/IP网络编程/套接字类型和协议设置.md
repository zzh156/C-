# 套接字类型和协议设置
## 协议就是为了完成数据交换而定好的约定

## 理解套接字的创建
```c
#include<sys/socket.h>
int socket(int domain, int type ,int protocol)
//成功时返回文件描述符，失败时返回-1
//domain:socket使用的协议族（protocol family）信息
//type socket数据传输类型信息
//protocol 计算机通信使用的协议信息
```
## 协议族(protocol family)
PF_INET            IPV4
PF_INET6           IPV6
PF_LOCAL           本地通信的unix协议族
PF_PACKET          底层套接字的协议族
PF_IPX             IPX Novell协议族
## 套接字类型(type)
套接字类型指的是套接字的数据传输方式

### 面向连接的套接字(SOCK_STREAM)
1.数据不会丢失
2.按序传送数据（晚传的数据不会先到）
3.传送的数据不存在数据边界

面向连接的套接字一般不会发生数据丢失，且必须与另一个同样特性的套接字连接

概括为：可靠的，按序传递的，基于字节的面向连接的数据传输方式的套接字
### 面向消息的套接字（SOCK_DGRAM)
1.快速传输而非顺序
2.传输数据可能丢失或损毁
3.有数据边界
4.限制每次传输的数据大小
传输数据有数据边界：两辆摩托车发送两个包裹，接受者也需分两次接收
特性：不可靠的，不按序传递的，以数据的高速传输为目的的套接字
面向消息的套接字不存在连接的概念
## 协议的最终选择
大部分情况第三个参数为0，除非
“同一协议族中存在多个数据传输方式相同的协议”
##具体实例
```c
int tcp_socket=socket(PF_INET,SOCK_STREAM,IPPROTO_TCP)
//TCP套接字的创建
int udp_socket=socket(PF_INET,SOCK_DGRAM,IPPROTP_UDP)
//UDP套接字的创建
```
## Windows平台下的实现及验证
### Windows平台的socket函数
```c
#include<winsock2.h>
SOCKET socket(int af,int type,int protocol);
//成功时返回socket句柄，失败时返回INVALID_SOCKET
//返回值SOCKET是一个结构体，虽然也可用int接受返回值，但考虑拓展性这样做
//发生错误返回 INVALID_SOCKET 是提示错误的常数，（实际值为-1，但不这么用）
```

