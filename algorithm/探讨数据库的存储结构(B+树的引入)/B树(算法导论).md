# B树的定义

为简单起见，我们假定，就像二叉搜索树和红黑树中一样，任何与关键字相联系的**卫星数据**将与关键字一样存放在同一个结点中。实际上，人们可能只是为每个关键字存放一个指针，这个指针指向存放该卫星数据的磁盘页。这一章的伪代码都隐含地假设了当一个关键字从一个结点移动到另一个结点，无论是与关键字联系的卫星数据还是指向该卫星数据的指针，都会随着关键字一起移动。一个常见的B树变种，称为B+树，他把所有的卫星数据都存储在叶节点中，内部结点只存放关键字和孩子指针，因此最大化内部节点的分支因子。

一颗B树T是具有以下性质的有根树（根为T.root）

1.每个结点x有下面属性：

a. x.n，当前存储在结点x中的关键字个数

b. x.n个关键字本身x.key1，x.key2，···，x.key，以非降序存放，使得x.key1<=x.key2<=x.key3

c. x.leaf,一个布尔值，如果x是叶节点，则为TRUE；如果x为内部结点，则为FALSE。

2.每个内部节点x还包含x，n+1个指向其孩子的指针x.c1，x.c2, x.cx,n+1,叶节点没有孩子，所以它们的ci属性没有定义

3.关键字x.keyi对存储在各子树中的关键字的范围加以分割：如果ki为任意一个存储在以x.c为根的子树中的关键字，那么

k1<=x.key1<=k2<=x.key2...

4.每个叶节点具有相同的高度，即树的高度h

5.每个结点所包含的关键字个数有上界和下界。用一个被称为B树的**最小度数**的固定整数t>=2来表示这些界

a.除了根结点以外的每个结点必须至少有t-1个关键字。因此，除了根节点以外的每个结点至少有t个孩子。如果树非空，根结点至少有一个关键字。

b.每个结点至多可包含2t-1个关键字。因此，一个内部结点至多有2t个孩子。当一个结点恰好有2t-1个关键字时，称该节点是**满的**

t=2时的B树是最简单的。每个内部结点有2个，3个或4个孩子，即一颗2-3-4树。然而，在实际中，t的值越大，B树的高度就越小。

# B树的高度

B树上大部分的操作所需的磁盘存取次数与B树的高度是成正比的。现在来分析B树最坏情况下的高度。

定理：





